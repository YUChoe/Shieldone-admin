
 .. index:: Routing, 라우팅, 정책 라우팅, 고정 라우팅, 다이나믹 라우팅, VRRP, 이중화, RIP, OSPF
라우팅 정책
------------------

 라우트 설정은 ShieldOne에 직접 연결되지 않은 네트워크로 패킷들을 전달할 때 어디로 전달할 지를 판단하는 라우팅 테이블을 입력하는 메뉴입니다.

 라우팅 정책에는 정책 라우팅, 고정 라우팅, 다이나믹 라우팅, VRRP 설정이 있습니다.


정책 라우팅
^^^^^^^^^^^^^^^^^^^^

 정책 라우팅이란 특정 조건에 해당하는 패킷을 라우팅 테이블과 상관없이 관리자가 원하는 곳으로 전송시키는 기능을 말합니다. 정책에 해당되지 않는 패킷은 라우팅테이블에 따라 전송됩니다. 정책 라우팅을 사용하면 패킷의 출발지 또는 목적지 주소에 따라 원하는 경로를 선택할 수 있습니다.

 ShieldOne 메인 메뉴의 라우팅 정책 탭의 정책 라우팅 메뉴에서 상태를 확인 할 수 있습니다.


 .. image:: images/3-51.png


 추가 버튼을 클릭하면 정책 라우팅을 추가 할 수 있습니다.


 .. image:: images/3-52.png

+----------------+----------------------------------------------------------------------------------------------------------------+
| Input          | 정책 라우팅이 적용되는 인터페이스를 정의합니다.                                                                |
+----------------+----------------------------------------------------------------------------------------------------------------+
| 소스           | 소스 IP 주소를 정의합니다. 정의한 소스 IP와 일치하는 패킷들은 정의된 WAN 인터페이스로 나가게 됩니다.           |
+----------------+----------------------------------------------------------------------------------------------------------------+
| 소스포트       | 소스 포트를 정의합니다. 정의한 소스포트와 일치하는 패킷들은 정의된 WAN 인터페이스로 나가게 됩니다.             |
+----------------+----------------------------------------------------------------------------------------------------------------+
| 목적지         | 목적지 IP 주소를 정의합니다. 정의한 목적지 IP와 일치하는 패킷들은 정의된 WAN 인터페이스로 나가게 됩니다.       |
+----------------+----------------------------------------------------------------------------------------------------------------+
| 목적지포트     | 목적지 포트를 정의합니다. 정의한 목적지 포트와 일치하는 패킷들은 정의된 WAN 인터페이스로 나가게 됩니다.        |
+----------------+----------------------------------------------------------------------------------------------------------------+
| 인터페이스     | 패킷이 나가는 인터페이스를 정의합니다.                                                                         |
+----------------+----------------------------------------------------------------------------------------------------------------+
| 백업           | 인터페이스에서 설정한 곳에 장애가 발생 할 경우 백업할 인터페이스를 정의합니다.                                 |
+----------------+----------------------------------------------------------------------------------------------------------------+
| 메모           | 정책 라우팅에 대한 설명을 추가 할 수 있습니다. 생략해도 정책 라우팅 활성화 할 수 있습니다.                     |
+----------------+----------------------------------------------------------------------------------------------------------------+
| 기타           | 같은 망 내에 다른 장치로 패킷을 나가게 설정 하기 위해 직접 GW IP, Tunel IP를 설정합니다.                       |
+----------------+----------------------------------------------------------------------------------------------------------------+
| Not 체크박스   | 활성화 하면 정의한 IP와 포트만을 제외 시킵니다.                                                                |
+----------------+----------------------------------------------------------------------------------------------------------------+
고정 라우팅
^^^^^^^^^^^^^^^^^^^^^

 고정 라우팅 탭을 클릭하면 라우팅 테이블을 확인 할 수 있고, 라우팅 테이블을 추가 할 수 있습니다.
 Destination 란에 목적지 네트워크를 입력하고 "Netmask"에는 목적지 네트워크에 대한 Subnet mask를 입력한 다음 해당 목적지 네트워크로 향하는 패킷들을 어디로 내 보낼 지 인터페이스를 입력 후 "확인" 버튼을 클릭하여 등록합니다.


 .. image:: images/3-53.png


다이나믹 라우팅
^^^^^^^^^^^^^^^^^^^^^




 .. image:: images/3-54.png

RIP : 라우터 내의 게이트웨이 호스트는 전체 라우팅 테이블을 가장 가까운 인근 호스트에 매 30초마다 보냅니다. 인접한 호스트는 자신의 차례가 되면 그 정보를 그 다음 인접한 호스트로 넘기는데, 이러한 전달은 그 네트웍 내의 모든 호스트들이 같은 라우팅 경로 정보를 가질 때까지 계속됩니다. RIP는 네트웍 거리를 결정하는 방법으로 홉의 총계를 사용합니다. (다른 프로토콜들은 타이밍까지를 포함하는 보다 정교한 알고리즘을 사용합니다.). 네트웍 내에 라우터를 갖고 있는 각 호스트는 패킷을 전달할 다음 호스트를 결정하기 위해 라우팅 테이블 정보를 사용합니다.

+------------------------+-------------------------------------------------------------------------------------------------------+
| Networks               | RIP 을 사용해 라우팅 할 네트워크 대역을 입력합니다.  ,(콤마)를 이용해 여러 대역을 입력 할 수 있습니다.|
+------------------------+-------------------------------------------------------------------------------------------------------+
| Redistribution Routes  | 서로 다른 라우팅 프로토콜 간에 라우팅 정보를 주고 받기 위해 사용합니다.                               |
+------------------------+-------------------------------------------------------------------------------------------------------+
| Timer 설정             | 라우팅 테이블 전송 주기, 장애발생시 대기시간, 만료시간을 설정 할 수 있습니다.                         |
+------------------------+-------------------------------------------------------------------------------------------------------+
| Update interval        | 라우팅 테이블 정보를 인접한 라우팅에게 전송할 주기를 설정 합니다.                                     |
+------------------------+-------------------------------------------------------------------------------------------------------+
| Hold                   | 정보가 들어오지 않을 때 Routing table을 삭제하지 않고 기다리는 시간입니다.                            |
+------------------------+-------------------------------------------------------------------------------------------------------+
| Expiration             | Expiration 에 설정한 시간이 만료되어도 정보가 들어오기 않으면 라우팅 테이블에서 삭제 됩니다.          |
+------------------------+-------------------------------------------------------------------------------------------------------+



 .. image:: images/3-54-2.png


OSPF :  라우팅 테이블의 변경 사실이나, 네트웍 내의 어떤 변화를 감지한 호스트는, 즉시 그 정보를 네트웍 내의 다른 모든 호스트들에게 알림으로써, 모두 같은 라우팅 정보를 가질 수 있도록 합니다. 라우팅 테이블 전체를 보내는 RIP과는 달리, OSPF를 사용하는 호스트는 오직 변경된 부분만을 보낸다. OSPF는 변경이 생겼을 때에만 변경된 정보를 멀티캐스트 합니다.


VRRP 설정
^^^^^^^^^^^^^^^^^^^^

 VRRP(Virtual Router Redundancy Protocol)은 여러 대의 라우터를 그룹으로 묶어 하나의 가상 IP 어드레스를 부여해 마스터로 지정된 라우터 장애시 VRRP그룹 내의 백업 라우터가 마스터로 자 동 전환되는 프로토콜입니다. 본 설정은 VRRP 를 지원하는 모든 Gateway와 연동 가능합니다.


 .. image:: images/3-55.png

+----------------------+-------------------------------------------------------------------------------------------------------------------------+
| 활성화               | VRRP 프로토콜을 활성화 또는 비활성화합니다.                                                                             |
+----------------------+-------------------------------------------------------------------------------------------------------------------------+
| STATE                | 여러대의 라우터 그룹에서 Master 라우터 인지 Backup 라우터 인지 선택합니다.                                              |
+----------------------+-------------------------------------------------------------------------------------------------------------------------+
| 인터페이스           | VRRP 그룹으로 묶을 가상 IP 가 속한 네트워크 인터페이스를 지정합니다.                                                    |
+----------------------+-------------------------------------------------------------------------------------------------------------------------+
| ID                   | 여러개의 VRRP 그룹이 있는 경우, 그룹을 구분할 수 있도록 숫자로 된 ID 를 입력합니다.                                     |
+----------------------+-------------------------------------------------------------------------------------------------------------------------+
| Priority             | VRRP 그룹에서 설정중인 ShieldOne SIG 의 우선순위를 지정합니다. Priority 숫자가 클수록 Master 로 동작합니다.             |
|                      |                                                                                                                         |
|                      | 이 Priority 값은 Tracking 인터페이스 설정에서 지정한 가중치 만큼 감소하게 되고                                          |
|                      |                                                                                                                         |
|                      | 만약 그 값이 백업 VRRP 라우터의 Priority 값보다 작아지게 되면 Master 권한을 백업 VRRP 라우터로 이양하게 됩니다.         |
+----------------------+-------------------------------------------------------------------------------------------------------------------------+
| 인증 패스워드        | VRRP 그룹에 속한 라우터들 간에 통신 시 인증을 위한 패스워드를 입력합니다.                                               |
+----------------------+-------------------------------------------------------------------------------------------------------------------------+
| 가상 Gateway IP      | VRRP 그룹 라우터들이 사용할 가상의 IP 어드레스를 정의합니다.                                                            |
+----------------------+-------------------------------------------------------------------------------------------------------------------------+
| Tracking 인터페이스  | 링크 상태를 주기적으로 체크할 인터페이스를 지정하고                                                                     |
|                      |                                                                                                                         |
|                      | 만약 링크 상태가 down 으로 되는 경우, Priority 에서 차감할 값을 정의합니다.                                             |
+----------------------+-------------------------------------------------------------------------------------------------------------------------+
